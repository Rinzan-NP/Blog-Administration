# API Endpoints Summary

## Base URL
```
http://your-domain.com/api/
```

## All Available Endpoints

### 1. Health Check
- **Method:** `GET`
- **URL:** `/api/health/`
- **Description:** Check if the API is running
- **Authentication:** Not required
- **Response:** `200 OK` with status and message

### 2. List Blog Posts
- **Method:** `GET`
- **URL:** `/api/posts/`
- **Description:** Get a paginated list of blog posts
- **Authentication:** Not required
- **Query Parameters:**
  - `author` (UUID) - Filter by author
  - `status` (string) - Filter by status (draft/published/archived)
  - `category` (string) - Filter by category
  - `featured` (boolean) - Filter by featured status
  - `search` (string) - Search in title, subtitle, category
  - `ordering` (string) - Order by created_at, updated_at, published_at
  - `page` (integer) - Page number for pagination
- **Response:** `200 OK` with paginated results
- **Note:** By default, only published posts are shown to non-authenticated users

### 3. Retrieve Blog Post
- **Method:** `GET`
- **URL:** `/api/posts/{id}/`
- **Description:** Get detailed information about a specific blog post
- **Authentication:** Not required
- **Path Parameters:**
  - `id` (UUID) - Blog post UUID
- **Response:** `200 OK` with blog post details
- **Error:** `404 Not Found` if post doesn't exist

### 4. Create Comment
- **Method:** `POST`
- **URL:** `/api/posts/{post_id}/comments/`
- **Description:** Create a new comment for a blog post
- **Authentication:** Not required
- **Path Parameters:**
  - `post_id` (UUID) - Blog post UUID
- **Request Body:**
  ```json
  {
    "name": "John Doe",
    "email": "john@example.com",
    "content": "Great post!"
  }
  ```
- **Response:** `201 Created` with comment data
- **Errors:**
  - `400 Bad Request` - Comments disabled or validation error
  - `404 Not Found` - Blog post doesn't exist
- **Note:** Comments are created with `is_approved: false` by default

### 5. List Comments
- **Method:** `GET`
- **URL:** `/api/posts/{post_id}/comments/list/`
- **Description:** Get all approved comments for a blog post
- **Authentication:** Not required
- **Path Parameters:**
  - `post_id` (UUID) - Blog post UUID
- **Response:** `200 OK` with array of approved comments
- **Error:** `404 Not Found` if blog post doesn't exist
- **Note:** Only approved comments are returned, ordered by created_at (newest first)

## Endpoint Summary Table

| # | Method | Endpoint | Description | Auth Required |
|---|--------|----------|------------|---------------|
| 1 | GET | `/api/health/` | Health check | No |
| 2 | GET | `/api/posts/` | List blog posts | No |
| 3 | GET | `/api/posts/{id}/` | Get blog post | No |
| 4 | POST | `/api/posts/{post_id}/comments/` | Create comment | No |
| 5 | GET | `/api/posts/{post_id}/comments/list/` | List comments | No |

## Router-Generated Endpoints

The following endpoints are automatically generated by Django REST Framework router:

- `GET /api/posts/` - List view (uses BlogPostListSerializer)
- `GET /api/posts/{id}/` - Detail view (uses BlogPostSerializer)

## URL Configuration

All API endpoints are prefixed with `/api/` and defined in:
- Main URLs: `config/urls.py` → includes `api.urls`
- API URLs: `api/urls.py` → defines all API endpoints

## Status Codes

- `200 OK` - Successful GET request
- `201 Created` - Successful POST request (resource created)
- `400 Bad Request` - Invalid request data
- `404 Not Found` - Resource not found
- `500 Internal Server Error` - Server error

## Notes

1. All endpoints are publicly accessible (AllowAny permission)
2. Blog posts can only be created/updated via Django Admin
3. Comments require admin approval before appearing in the list
4. Default pagination: 10 items per page
5. Featured images are served at `/media/blog_images/{filename}`

---

## Django Admin Interface

The Django Admin interface is used to manage all blog content. Blog posts, authors, tags, and comments are managed through the admin panel.

### Admin Access

- **URL:** `http://your-domain.com/admin/`
- **Login Required:** Yes (staff/superuser credentials required)

### Admin Sections

#### 1. Blog Posts (`/admin/api/blogpost/`)
- Create, edit, and manage blog posts
- Visual status badges (Published/Draft/Archived)
- Featured badge indicator
- Tag management with horizontal filter widget
- Featured image upload with preview
- Inline comments view
- Bulk actions: publish, draft, feature/unfeature
- Advanced filtering and search

#### 2. Authors (`/admin/api/author/`)
- Manage blog post authors
- View blog posts count per author
- Search by name

#### 3. Tags (`/admin/api/tag/`)
- Manage tags for blog posts
- Auto-generated slugs
- View blog posts count per tag
- Search by name or slug

#### 4. Comments (`/admin/api/comment/`)
- Moderate comments
- Approve/disapprove comments
- View comment previews
- Bulk approve/disapprove actions
- Filter by approval status, date, and blog post

### Admin Features

- **Visual Enhancements:**
  - Color-coded status badges
  - Clickable counts linking to filtered results
  - Image previews
  - Tag badges display

- **Search & Filtering:**
  - Global search in all list views
  - Advanced sidebar filters
  - Date hierarchy navigation
  - Related item links

- **Bulk Operations:**
  - Select multiple items
  - Apply actions to multiple items at once
  - Useful for publishing, featuring, and comment moderation

### Admin Theme

The admin interface uses a **light theme by default** for better readability. Users can toggle to dark theme if preferred.

### Admin URLs

```
/admin/                          - Admin dashboard
/admin/api/blogpost/             - Blog posts list
/admin/api/blogpost/add/         - Create new blog post
/admin/api/blogpost/{id}/change/ - Edit blog post
/admin/api/author/               - Authors list
/admin/api/tag/                  - Tags list
/admin/api/comment/              - Comments list
```

### Permissions

- **Staff Users:** Can access admin interface
- **Superusers:** Full access to all admin features
- **Regular Users:** Cannot access admin (API access only)

For detailed admin documentation, see [docs/API.md](./docs/API.md#django-admin-interface)

